import org.gradle.distribution.DownloadGradle   

apply plugin: 'base'
version = '0.1'

ext {
    gradleVersion = '3.4'
    companyName = 'company'
}

task downloadGradle(type: DownloadGradle) {
    description = 'Downloads the Gradle distribution with a given version.'
    gradleVersion = project.gradleVersion
    destinationDir = file("$buildDir/gradle-downloads")
	if( !destinationDir.exists() ) {
			destinationDir.mkdirs()
	}
}

task customGradleDistribution(type: Zip, dependsOn: downloadGradle) {
    description = 'Builds custom Gradle distribution and bundles initialization scripts.'
    archiveName "$companyName-gradle-$downloadGradle.gradleVersion-$version-bin.zip"

    from zipTree(downloadGradle.destinationFile)
    into "$downloadGradle.distributionNameBase/init.d", {
        from 'src/init.d'
    }
}

defaultTasks 'customGradleDistribution'